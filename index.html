<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Digital Boundaries</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <style>
        /* Custom styles */
        .loading {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5rem;
            color: #000;
        }
    </style>
    <script>
        function initMap() {
            const map = new google.maps.Map(document.getElementById("map"), {
                center: { lat: -30.05, lng: 30.80 },
                zoom: 12,
                mapTypeControl: true,
                mapTypeControlOptions: {
                    style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,
                    position: google.maps.ControlPosition.TOP_RIGHT
                }
            });

            const drawingManager = new google.maps.drawing.DrawingManager({
                drawingMode: google.maps.drawing.OverlayType.POLYGON,
                drawingControl: true,
                drawingControlOptions: {
                    position: google.maps.ControlPosition.TOP_CENTER,
                    drawingModes: ['polygon']
                },
                polygonOptions: {
                    strokeColor: "#FF0000",
                    strokeOpacity: 0.8,
                    strokeWeight: 2,
                    fillColor: "#FF0000",
                    fillOpacity: 0.35,
                    editable: true,
                    draggable: true
                }
            });
            drawingManager.setMap(map);

            // Toggleable Layers
            const trafficLayer = new google.maps.TrafficLayer();
            const toggleTraffic = document.getElementById("toggle-traffic");
            toggleTraffic.addEventListener("click", () => {
                trafficLayer.setMap(trafficLayer.getMap() ? null : map);
            });

            // Hide loading indicator when map is loaded
            google.maps.event.addListenerOnce(map, 'idle', () => {
                const loadingIndicator = document.getElementById("loading-indicator");
                loadingIndicator.style.display = "none";
            });
        }

        document.addEventListener("DOMContentLoaded", () => {
            const loadingIndicator = document.getElementById("loading-indicator");
            loadingIndicator.style.display = "block";
        });
    </script>
    <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAAJBKHAL3zul4P5L-_CZo8GCpYYGN9y48&libraries=drawing&callback=initMap"></script>
</head>
<body class="bg-gray-100">
    <header class="bg-blue-600 text-white text-center py-6">
        <h1 class="text-3xl font-bold">Umnini Digital Boundaries Prototype</h1>
        <p class="mt-2">Digitize and manage home boundaries online.</p>
    </header>

    <section class="container mx-auto mt-6 p-6 bg-white shadow-lg rounded-lg">
        <h2 class="text-xl font-semibold mb-4">How It Works</h2>
        <ul class="list-disc ml-6">
            <li>Interactive map for marking property boundaries.</li>
            <li>Secure portal for homeowners to register and verify land ownership.</li>
            <li>GPS tracking and document uploads for property validation.</li>
            <li>Mobile-friendly interface for easy access and updates.</li>
            <li>Future plans for AI-based land mapping and blockchain security.</li>
        </ul>
    </section>

    <section class="container mx-auto mt-6 p-6 bg-white shadow-lg rounded-lg">
        <h2 class="text-xl font-semibold mb-4">Live Map Preview</h2>
        <div id="map" class="w-full h-96 relative">
            <div id="loading-indicator" class="loading">Loading...</div>
        </div>
        <button id="toggle-traffic" class="mt-4 bg-blue-600 text-white py-2 px-4 rounded">Toggle Traffic Layer</button>
    </section>

    <footer class="bg-blue-600 text-white text-center py-4 mt-6">
        <p>&copy; 2025 Umnini Community Trust | All Rights Reserved</p>
    </footer>
</body>
</html>